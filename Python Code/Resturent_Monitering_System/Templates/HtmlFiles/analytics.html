{% extends "HtmlFiles/Base.html" %}

{% block title %}Analytics Dashboard{% endblock title %}

{% load static %}

{% block body %}

<link href="{% static 'CssFiles/analytics.css' %}" rel="stylesheet">
<link href="{% static 'CssFiles/variables.css' %}" rel="stylesheet">
<link href="{% static 'CssFiles/analytics_tables.css' %}" rel="stylesheet">
<h2 class="dashboard-title">General Analytics Report</h2>

<div class="page-slider">
    <h2><a href="{% url 'analytics_table' %}" class="slider-button {% if active_page == 'Visualization' %}active{% endif %}">Statistics</a></h2>
    <h2><a href="{% url 'analytics' %}" class="slider-button {% if active_page == 'statistics' %}active{% endif %}">Visualization</a></h2>
</div>
<style>
    .top-charts-container {
        background-color: black !important;
      }
      @media only screen and (max-width: 768px) {
        .dates-container {
            display: none !important;
        }
        .main-container {
            display: block;
            width: 80% !important;
            margin: 0 auto; /* Centers the container */
        }
    }
    
    
</style>
<div class="main-container">
    <div class="dates-container">
        <h3>Available Dates</h3>
        {% for date in available_dates %}
            <a href="?date={{ date }}" class="date-link {% if selected_date == date %}selected{% endif %}">{{ date }}</a>
        {% empty %}
            <p>No dates available</p>
        {% endfor %}
    </div>
    <div class="charts-wrapper">
        {% if not selected_date %}
            <h2 class="charts-heading">All Dates Data Overview</h2>
        {% else %}
            <h2 class="charts-heading">Data for {{ selected_date }}</h2>
        {% endif %}
        <div class="top-charts-container">
            <div class="chart-box top-chart-box">
                <h3 class="chart-title">Popular Dishes</h3>
                <canvas id="barChart"></canvas>
            </div>
            <div class="chart-box top-chart-box">
                <h3 class="chart-title">Peak Hours</h3>
                <canvas id="pieChart"></canvas>
            </div>
        </div>
        <div class="bottom-chart-container">
            <div class="chart-box bottom-chart-box">
                <h3 class="chart-title">Customer Trends</h3>
                <canvas id="lineChart"></canvas>
            </div>
        </div>
        <div id="error-container"></div>
    </div>
</div>

<div id="analyticsData" data-value='{{ analytics_data|safe }}'></div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{% static 'JavaScriptFiles/analytics.js' %}"></script>

{% endblock body %}

