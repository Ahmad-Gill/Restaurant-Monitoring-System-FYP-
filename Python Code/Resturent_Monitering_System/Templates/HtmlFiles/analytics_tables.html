{% extends "HtmlFiles/Base.html" %}

{% block title %}Analytics Data Tables{% endblock title %}

{% load static %}
{% block body %}

<link href="{% static 'CssFiles/analytics_tables.css' %}" rel="stylesheet">
<link href="{% static 'CssFiles/customer_waiting_time_for_order.css' %}" rel="stylesheet">







<h2>General Analytics Report</h2>


<div class="page-slider">
    <h2>
        <a href="{% url 'analytics_table' %}" class="slider-button {% if active_page == 'statistics' %}active{% endif %}">
            Statistics
        </a>
    </h2>
    <h2>
        <a href="{% url 'analytics' %}" class="slider-button {% if active_page == 'Visualization' %}active{% endif %}">
            Visualization
        </a>
    </h2>
</div>



<div class="containerr">
    <h2> Order Details</h2>
    <table class="waiting-time-table">
        <thead>
            <tr>
                <th>Dining ID</th>
                <th>Favorite Dish</th>
                <th>Dish Count</th>
                <th>Date</th>
                <th>Image</th>
            
            </tr>
        </thead>
        <tbody>
            {% for date, details in grouped_data.items %}
                {% for dish, count in details.meals.items %}
                    <tr>
                        <td>{{ details.table_number }}</td>
                        <td>{{ dish }}</td>
                        <td>{{ count }}</td>

                        <td>{{ date }}</td>
                        <td>
                            {% if details.meal_image %}
                                <img src="{{ details.meal_image.url }}" alt="Meal Image" class="img-thumbnail">
                            {% else %}
                                <img src="/static/default-image.jpg" alt="Default Image" class="img-thumbnail">
                            {% endif %}
                        </td>
                  
                    </tr>
                {% endfor %}
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="containerr">
    <h2>Maximum People Per Day</h2>
    <div class="table-responsive">
        <table class="waiting-time-table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Max People</th>
                  
                </tr>
            </thead>
            <tbody>
                {% if max_people_per_day %}
                    {% for date, max_people in max_people_per_day.items %}
                        <tr>
                            <td>{{ date }}</td>
                            <td>{{ max_people }}</td>
                           
                        </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="3" class="text-center">No data available</td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
</div>



<div class="containerr">
    <h2>Peak Hour Per Day</h2>
    <table class="waiting-time-table">
        <thead>
            <tr>
                <th>Date</th>
                <th>Peak Hour</th>
                <th>People Count</th>
            </tr>
        </thead>
        <tbody>
            {% for date, peak_info in peak_hours_per_day.items %}
                <tr>
                    <td>{{ date }}</td>
                    <td>{{ peak_info.hour }}:00</td>
                    <td>{{ peak_info.count }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>



{% endblock body %}
